@model MovieHub.ViewModel.IndexViewModel

@{
    ViewData["Title"] = "Home Page";
}
<div class="container-fluid">
    <div class="row ">
        <div class="col-12 text-center bg-black">
            <h1 class="display-4">Welcome</h1>
            <p>This is the index-page of MovieHub.<br/>Site under construction</p>
        </div>   
    </div>
    <div class="row">
        <div class="col-8 hide-scrollbar" style="min-height: 100%;">
            <div class="row text-center" style="height: calc(100vh - 250px)">
                @foreach (var item in Model!.MovieIndex)
                {
                    <div class="col-4">
                        <h4 class="movie-title">@Html.DisplayFor(model => item.Movie.Title)</h4>
                        <a href="@Url.Action("Details", "Movies", new {id = item.MovieId})">
                            <img width="80%" src="@Url.Content(item.Movie.ImageUrl)"/>
                        </a>
                        <div class="details-container">
                            <hr/>
                            <div class="justify-content-between d-flex">
                                <button onclick="location.href='@Url.Action("Index", "Orders", item)'"
                                        class="btn btn-primary btn-sizing me-1">Buy Tickets</button>
                                <button onclick="location.href='@Url.Action("Details", "Movies", new {id = item.MovieId})'" 
                                        class="btn btn-primary btn-sizing ms-1">Movie Details</button>
                            </div>
                            <hr/>
                            <dl class="row">
                                <dt class="col-sm-2 align-start">
                                    @Html.DisplayNameFor(model => model.Movie)
                                </dt>
                                <dd class="col-sm-10 align-end">
                                    @Html.DisplayFor(model => item.Movie.Title)
                                </dd>
                                <dt class="col-sm-2 align-start">
                                    Time
                                </dt>
                                <dd class="col-sm-10 align-end">
                                    @{
                                        var startTime = item.StartAt.ToLocalTime().TimeOfDay.ToString(@"hh\:mm");
                                    }
                                    @Html.DisplayFor(model => startTime)
                                </dd>
                                <dt class="col-sm-2 align-start">
                                    @Html.DisplayNameFor(model => model.Hall)
                                </dt>
                                <dd class="col-sm-10 align-end">
                                    @Html.DisplayFor(model => item.Hall.Name)
                                </dd>
                                <dt class="col-sm-2 align-start">
                                    3D
                                </dt>
                                @if (item.Movie.Is3D)
                                {
                                    <dd class="col-sm-10 align-end">
                                        Yes
                                    </dd>
                                }
                                else
                                {
                                    <dd class="col-sm-10 align-end">
                                        No
                                    </dd>
                                }
                            </dl>
                        </div>
                    </div>
                }
            </div>
        </div>
        <div class="col-4">
            <div class="text-center index-hall-overview">
                @foreach (var item in Model.HallIndex)
                    {
                        <div class="row">
                            <p class="index-hall-title">CINEMA @Html.DisplayFor(model => item.HallId)</p>
                            <p class="index-hall-now">Now playing: @Html.DisplayFor(model => item.Movie.Title)</p>
                            <p class="index-hall-next">Next movie: </p>
                        </div>
                        <hr class="index-hall-hr"/>
                    }
            </div>
        </div>
    </div>
</div>